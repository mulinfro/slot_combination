# 语义模板化

在不同任务(领域)间， 虽然词汇可能相差很大，但是句子结构可以是非常类似的，
比如：
```python
播放 周杰伦 的 歌曲 稻香 （音乐）
朗诵 李白 的 绝句 静夜思 （诗歌）
----------------------
查询 手机 剩余流量  (运因商)
查询 信用卡 额度    (信用卡)
```
上面的`音乐`和`诗歌`， 不同领域的`查询`句子结构是一致的， 如果已有音乐的规则，要开发诗歌领域，直接把音乐领域的句式抽象出来， 扩展到诗歌领域即可。


模板化核心思想就是提取出句式结构， 通过修改不同领域的词表映射，自动生成新的规则，来达到快速的语义开发效果。
template文件里有一个例子。

## 模板
一个模板分为四个部分:
- tags
- intent_mapping
- slot_mapping
- body


### body
语义规则体， 这部分是基础的语义实现， 语法与解析引擎使用的基本一致;

### tags
`tags`是词到词表的映射。格式是一个词汇跟着`[]`表示的词表名， 词表做全局管理，可以引用。

tags中的*词汇*主要是为了易读， 在body中可以直接当作词表使用; 这样body中的实现体所表达的语句能一目了然， 易于后期开发维护。
```python
    青花瓷[歌曲名]  => 词语：青花瓷;  词表名: 歌曲名
    播放[动词_播放] => 词语: 播放;    词表名: 动词_播放
```

### intent_mapping
`intent_mapping`表示意图映射， 可以将规则体body中出现的意图用`词`及`词表名`替代; 在新领域自动生成新意图
```python
    播放专辑 => {播放}[专辑]
    规则中的"播放专辑"意图会被替换成: 由 词"播放" +  词表名"专辑"， 拼接而成， 当配置成不同的领域时， 会自动用新领域的名称替代， 生成新的意图。
```


### slot_mapping
`slot_mapping`表示槽位映射， 可以将规则体body中出现的槽位名用`词`或`词表名`替代; 在新领域自动生成新槽位
```python
    量词 = [量词]
    规则中的"量词"槽位会由词表名"量词"替换 ， 当配置成不同的领域时， 会自动用新领域的名称替代， 生成新的意图
```

### 迁移
迁移时只要定义类似文件中`word_mapping`的词及词表的映射即可
